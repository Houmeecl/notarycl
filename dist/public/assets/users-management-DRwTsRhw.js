import{c as le,r as f,aG as ne,g as ie,y as te,j as e,a as g,e as N,b3 as O,ap as R,K as k,b as ce,d as oe,f as de,B as d,aQ as me,T as xe,i as he,k as b,n as je,aS as ue,aT as pe,aU as T,aV as u,aW as ve,aX as m,b4 as fe,b5 as ge,ar as A,as as U,at as D,au as E,av as V,o as B,p as r,q as l,s as n,t as i,I as c,w as t,N as q,O as H,P as M,Q as G,R as x,V as P,aY as J,aw as $,aP as h,G as Ne,_ as be,H as p}from"./index-C9eFxaw9.js";import{V as we}from"./VecinosAdminLayout-DXPJsu45.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=le("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),v=[{id:1,username:"adminprincipal",fullName:"Administrador Principal",email:"admin@vecinos.test",role:"admin",status:"active",createdAt:"2025-01-01",lastLogin:"2025-05-03"},{id:2,username:"certificador1",fullName:"Carlos Rodríguez",email:"carlos@vecinos.test",role:"certifier",status:"active",createdAt:"2025-01-15",lastLogin:"2025-05-02"},{id:3,username:"certificador2",fullName:"Ana Martínez",email:"ana@vecinos.test",role:"certifier",status:"active",createdAt:"2025-02-10",lastLogin:"2025-05-01"},{id:4,username:"supervisor1",fullName:"Juan Pérez",email:"juan@vecinos.test",role:"supervisor",status:"active",createdAt:"2025-03-01",lastLogin:"2025-04-30"},{id:5,username:"vendedor1",fullName:"María López",email:"maria@vecinos.test",role:"seller",status:"active",createdAt:"2025-03-15",lastLogin:"2025-05-03"},{id:6,username:"vendedor2",fullName:"Luis González",email:"luis@vecinos.test",role:"seller",status:"inactive",createdAt:"2025-04-01",lastLogin:"2025-04-25"}],Ce=Ne({username:p().min(4,{message:"El usuario debe tener al menos 4 caracteres"}),fullName:p().min(3,{message:"El nombre completo es requerido"}),email:p().email({message:"Email inválido"}),password:p().min(6,{message:"La contraseña debe tener al menos 6 caracteres"}).optional(),confirmPassword:p().optional(),role:p().min(1,{message:"Seleccione un rol"}),status:be().default(!0)}).refine(o=>!(o.password&&o.confirmPassword&&o.password!==o.confirmPassword),{message:"Las contraseñas no coinciden",path:["confirmPassword"]}),ke=()=>{const[o,X]=f.useState("all"),[K,w]=f.useState(!1),[L,C]=f.useState(!1),[j,z]=f.useState(null),[W,y]=f.useState(!1),{toast:S}=ne(),a=ie({resolver:te(Ce),defaultValues:{username:"",fullName:"",email:"",password:"",confirmPassword:"",role:"",status:!0}}),F=()=>o==="all"?v:v.filter(s=>s.role===o),Y=s=>{z(s),a.reset({username:s.username,fullName:s.fullName,email:s.email,password:"",confirmPassword:"",role:s.role,status:s.status==="active"}),C(!0)},_=()=>{a.reset({username:"",fullName:"",email:"",password:"",confirmPassword:"",role:"",status:!0}),w(!0)},Z=s=>{z(s),y(!0)},ee=()=>{S({title:"Usuario eliminado",description:`El usuario ${j.username} ha sido eliminado.`,variant:"default"}),y(!1)},I=s=>{L?(S({title:"Usuario actualizado",description:`El usuario ${s.username} ha sido actualizado correctamente.`,variant:"default"}),C(!1)):(S({title:"Usuario creado",description:`El usuario ${s.username} ha sido creado correctamente.`,variant:"default"}),w(!1))},se=s=>{switch(s){case"admin":return e.jsx(h,{className:"bg-purple-500",children:"Administrador"});case"certifier":return e.jsx(h,{className:"bg-blue-500",children:"Certificador"});case"supervisor":return e.jsx(h,{className:"bg-green-500",children:"Supervisor"});case"seller":return e.jsx(h,{className:"bg-amber-500",children:"Vendedor"});default:return e.jsx(h,{className:"bg-gray-500",children:"Desconocido"})}},ae=s=>{switch(s){case"active":return e.jsx(h,{className:"bg-green-500",children:"Activo"});case"inactive":return e.jsx(h,{className:"bg-gray-500",children:"Inactivo"});default:return e.jsx(h,{className:"bg-gray-500",children:"Desconocido"})}},re=s=>{switch(s){case"admin":return e.jsx(O,{className:"h-4 w-4 text-purple-500"});case"certifier":return e.jsx(R,{className:"h-4 w-4 text-blue-500"});case"supervisor":return e.jsx(Q,{className:"h-4 w-4 text-green-500"});case"seller":return e.jsx(k,{className:"h-4 w-4 text-amber-500"});default:return e.jsx(k,{className:"h-4 w-4 text-gray-500"})}};return e.jsxs(we,{title:"Gestión de Usuarios",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(g,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Administradores"}),e.jsx("p",{className:"text-2xl font-bold",children:v.filter(s=>s.role==="admin").length})]}),e.jsx(O,{className:"h-8 w-8 text-purple-500"})]})})}),e.jsx(g,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Certificadores"}),e.jsx("p",{className:"text-2xl font-bold",children:v.filter(s=>s.role==="certifier").length})]}),e.jsx(R,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(g,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Supervisores"}),e.jsx("p",{className:"text-2xl font-bold",children:v.filter(s=>s.role==="supervisor").length})]}),e.jsx(Q,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(g,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Vendedores"}),e.jsx("p",{className:"text-2xl font-bold",children:v.filter(s=>s.role==="seller").length})]}),e.jsx(k,{className:"h-8 w-8 text-amber-500"})]})})})]}),e.jsxs(g,{children:[e.jsx(ce,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(oe,{children:"Usuarios del sistema"}),e.jsx(de,{children:"Administre los usuarios de la plataforma Vecinos Xpress"})]}),e.jsxs(d,{onClick:_,children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Nuevo Usuario"]})]})}),e.jsx(N,{className:"p-0",children:e.jsxs(xe,{defaultValue:"all",value:o,onValueChange:X,className:"w-full",children:[e.jsx("div",{className:"border-b",children:e.jsxs(he,{className:"bg-transparent -mb-px mx-6",children:[e.jsx(b,{value:"all",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Todos"}),e.jsx(b,{value:"admin",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Admins"}),e.jsx(b,{value:"certifier",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Certificadores"}),e.jsx(b,{value:"supervisor",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Supervisores"}),e.jsx(b,{value:"seller",className:"data-[state=active]:border-b-2 data-[state=active]:border-amber-500 data-[state=active]:shadow-none rounded-none",children:"Vendedores"})]})}),e.jsx(je,{value:o,className:"pt-0 pb-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ue,{children:[e.jsx(pe,{children:e.jsxs(T,{children:[e.jsx(u,{children:"Usuario"}),e.jsx(u,{children:"Nombre"}),e.jsx(u,{children:"Email"}),e.jsx(u,{children:"Rol"}),e.jsx(u,{children:"Estado"}),e.jsx(u,{children:"Último acceso"}),e.jsx(u,{className:"text-right",children:"Acciones"})]})}),e.jsxs(ve,{children:[F().map(s=>e.jsxs(T,{children:[e.jsx(m,{className:"font-medium",children:s.username}),e.jsx(m,{children:s.fullName}),e.jsx(m,{children:s.email}),e.jsx(m,{className:"whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[re(s.role),se(s.role)]})}),e.jsx(m,{children:ae(s.status)}),e.jsx(m,{className:"text-sm",children:new Date(s.lastLogin).toLocaleDateString()}),e.jsx(m,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>Y(s),children:e.jsx(fe,{className:"h-4 w-4"})}),s.username!=="adminprincipal"&&e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>Z(s),children:e.jsx(ge,{className:"h-4 w-4 text-red-500"})})]})})]},s.id)),F().length===0&&e.jsx(T,{children:e.jsx(m,{colSpan:7,className:"h-32 text-center",children:"No se encontraron usuarios"})})]})]})})})]})})]})]}),e.jsx(A,{open:K,onOpenChange:w,children:e.jsxs(U,{className:"sm:max-w-[500px]",children:[e.jsxs(D,{children:[e.jsx(E,{children:"Crear nuevo usuario"}),e.jsx(V,{children:"Complete los datos para crear un nuevo usuario en el sistema"})]}),e.jsx(B,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(I),className:"space-y-4",children:[e.jsx(r,{control:a.control,name:"username",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nombre de usuario"}),e.jsx(i,{children:e.jsx(c,{placeholder:"usuario123",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"fullName",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nombre completo"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Juan Pérez",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Email"}),e.jsx(i,{children:e.jsx(c,{placeholder:"correo@ejemplo.com",...s})}),e.jsx(t,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{control:a.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Contraseña"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"******",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"confirmPassword",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Confirmar contraseña"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"******",...s})}),e.jsx(t,{})]})})]}),e.jsx(r,{control:a.control,name:"role",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Rol"}),e.jsxs(q,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(i,{children:e.jsx(H,{children:e.jsx(M,{placeholder:"Seleccione un rol"})})}),e.jsxs(G,{children:[e.jsx(x,{value:"admin",children:"Administrador"}),e.jsx(x,{value:"certifier",children:"Certificador"}),e.jsx(x,{value:"supervisor",children:"Supervisor"}),e.jsx(x,{value:"seller",children:"Vendedor"})]})]}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"status",render:({field:s})=>e.jsxs(l,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Usuario activo"}),e.jsx(P,{children:"Activar o desactivar acceso del usuario"})]}),e.jsx(i,{children:e.jsx(J,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(t,{})]})}),e.jsxs($,{children:[e.jsx(d,{variant:"outline",type:"button",onClick:()=>w(!1),children:"Cancelar"}),e.jsx(d,{type:"submit",children:"Crear usuario"})]})]})})]})}),e.jsx(A,{open:L,onOpenChange:C,children:e.jsxs(U,{className:"sm:max-w-[500px]",children:[e.jsxs(D,{children:[e.jsx(E,{children:"Editar usuario"}),e.jsxs(V,{children:["Modifique los datos del usuario ",j==null?void 0:j.username]})]}),e.jsx(B,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(I),className:"space-y-4",children:[e.jsx(r,{control:a.control,name:"username",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nombre de usuario"}),e.jsx(i,{children:e.jsx(c,{placeholder:"usuario123",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"fullName",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nombre completo"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Juan Pérez",...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Email"}),e.jsx(i,{children:e.jsx(c,{placeholder:"correo@ejemplo.com",...s})}),e.jsx(t,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{control:a.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Nueva contraseña (opcional)"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"******",...s})}),e.jsx(P,{className:"text-xs",children:"Dejar en blanco para mantener la actual"}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"confirmPassword",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Confirmar contraseña"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"******",...s})}),e.jsx(t,{})]})})]}),e.jsx(r,{control:a.control,name:"role",render:({field:s})=>e.jsxs(l,{children:[e.jsx(n,{children:"Rol"}),e.jsxs(q,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(i,{children:e.jsx(H,{children:e.jsx(M,{placeholder:"Seleccione un rol"})})}),e.jsxs(G,{children:[e.jsx(x,{value:"admin",children:"Administrador"}),e.jsx(x,{value:"certifier",children:"Certificador"}),e.jsx(x,{value:"supervisor",children:"Supervisor"}),e.jsx(x,{value:"seller",children:"Vendedor"})]})]}),e.jsx(t,{})]})}),e.jsx(r,{control:a.control,name:"status",render:({field:s})=>e.jsxs(l,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Usuario activo"}),e.jsx(P,{children:"Activar o desactivar acceso del usuario"})]}),e.jsx(i,{children:e.jsx(J,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(t,{})]})}),e.jsxs($,{children:[e.jsx(d,{variant:"outline",type:"button",onClick:()=>C(!1),children:"Cancelar"}),e.jsx(d,{type:"submit",children:"Guardar cambios"})]})]})})]})}),e.jsx(A,{open:W,onOpenChange:y,children:e.jsxs(U,{className:"sm:max-w-[425px]",children:[e.jsxs(D,{children:[e.jsx(E,{children:"Confirmar eliminación"}),e.jsxs(V,{children:["¿Está seguro que desea eliminar el usuario ",j==null?void 0:j.username,"? Esta acción no se puede deshacer."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(d,{variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),e.jsx(d,{variant:"destructive",onClick:ee,children:"Eliminar"})]})]})})]})};export{ke as default};
